"use strict";document.addEventListener("DOMContentLoaded",(()=>{function e(e,t,o){let c,n,l;const a=document.querySelector(".clicker__background"),r=document.querySelector(".clicker__shop-per-click"),s=document.querySelector(".clicker__shop-per-second"),i=1.28,d=[50,200,1e3,5e3,2e4,5e4,1e5],p=[.1,1,5,10,25,100,250],u=[20,100,500,2500,12500,35e3,77500],m=[.1,5,10,25,125,500,1e3];function k(e,t){for(let o=0;o<t.length;o++){const c=document.createElement("div");let n,l,a;c.classList.add("clicker__shop-up"),e.classList.contains("clicker__shop-per-click")?(n="clicker__shop-lvl-per-click",l="click",a="click"):(n="clicker__shop-lvl-per-second",l="second",a="sec"),c.innerHTML=`\n        <div class="clicker__shop-price not-enough">\n          <p>\n            <span class="clicker__shop-price-amount per__${l}-amount per__click-amount">0</span>\n            <span class="clicker__shop-price-count per__${l}-count per__click-count">0</span>\n          </p>\n          <img src="img/cookie.png" alt="cookie" />\n        </div>\n        <div class="clicker__shop-lvl ${n} not-enough">+${t[o]}/${a}</div>`,e.append(c)}}k(r,p),k(s,m);const h=document.querySelector(".clicker__btn"),g=document.querySelector(".clicker__count"),x=document.querySelectorAll(".clicker__shop-lvl"),_=document.querySelectorAll(".clicker__shop-lvl-per-click"),S=document.querySelectorAll(".clicker__shop-lvl-per-second"),v=document.querySelectorAll(".clicker__shop-price-amount"),L=document.querySelectorAll(".per__click-amount"),C=document.querySelectorAll(".per__second-amount"),I=document.querySelectorAll(".per__click-count"),M=document.querySelectorAll(".per__second-count"),y=document.querySelector(".clicker__seconds"),f=document.querySelector(".clicker__clicks"),F=document.querySelector(".cookie__scroll-top"),N=document.querySelector(".reset");null!==localStorage.getItem("count")&&null!==localStorage.getItem("perSecond")&&null!==localStorage.getItem("perClick")&&null!==localStorage.getItem("perSecondUP")&&null!==localStorage.getItem("perClickUP")?(c=+localStorage.getItem("count"),n=+localStorage.getItem("perSecond"),l=+localStorage.getItem("perClick"),g.textContent=Math.round(c),y.textContent=n>=100?Math.round(n):n.toFixed(1),f.textContent=l>=10?Math.round(l):l.toFixed(1)):(localStorage.setItem("count",c=0),localStorage.setItem("perSecond",n=0),localStorage.setItem("perClick",l=1),g.textContent=c,y.textContent=n>=100?Math.round(n):n.toFixed(1),f.textContent=l>=10?Math.round(l):l.toFixed(1),q(_,"perClickUP"),q(S,"perSecondUP")),h.addEventListener(e,(()=>{h.classList.add("click"),h.addEventListener(o,(()=>{h.classList.remove("click")}))})),h.addEventListener("click",(()=>{h.classList.remove("click")})),h.addEventListener(t,(()=>{h.classList.remove("click"),g.textContent=c>=1e3?Math.round(c):c.toFixed(1),c+=+localStorage.getItem("perClick"),localStorage.setItem("count",c);const e=document.createElement("div");e.classList.add("cookie-bg");let t=5*Math.random()+6.5,o=100*Math.random(),n=Math.random()+1;n<1.1&&(n+=.1),e.style.cssText=`\n      animation: fall ${t}s linear;\n      left: ${o}%;\n      transform: scale(${n});`,a.append(e),setTimeout((()=>e.remove()),1e3*+t)})),setInterval((()=>{let e=c.toFixed(1);setTimeout((()=>{let t=+(c.toFixed(1)-e).toFixed(1);Math.round(n)<=Math.round(t)?+n===t||Math.round(n)===Math.round(t)||Math.floor(n)===Math.floor(t)||Math.round(n)===Math.floor(t)?y.textContent=n>=100?Math.round(n):n.toFixed(1):y.textContent=n>=100?Math.round(t):t.toFixed(1):y.textContent=n>=100?Math.round(n):n.toFixed(1)}),998)}),150);for(let e=0;e<x.length;e++)setInterval((()=>{+x[e].dataset.price>c?(x[e].classList.add("not-enough"),v[e].parentNode.parentNode.classList.add("not-enough")):(x[e].classList.remove("not-enough"),v[e].parentNode.parentNode.classList.remove("not-enough"))}),50);function E(t,a,r,s){if(t[0].parentNode.parentNode.classList.contains("clicker__shop-per-click"))for(let n=0;n<t.length;n++)t[n].setAttribute("data-price",d[n]),t[n].setAttribute("data-count",p[n]),t[n].addEventListener(e,(()=>{+t[n].dataset.price<=c&&!t[n].classList.contains("not-enough")&&(t[n].classList.add("click-up"),a[n].parentNode.parentNode.classList.add("click-up"),t[n].addEventListener(o,(()=>{t[n].classList.remove("click-up"),a[n].parentNode.parentNode.classList.remove("click-up")})))})),t[n].addEventListener("click",(()=>{+t[n].dataset.price<=c&&!t[n].classList.contains("not-enough")&&(c-=+t[n].dataset.price,l+=+t[n].dataset.count,localStorage.setItem("count",c),localStorage.setItem("perClick",l),f.textContent=l>=10?Math.round(l):l.toFixed(1),t[n].classList.remove("click-up"),a[n].parentNode.parentNode.classList.remove("click-up"))}));else for(let l=0;l<t.length;l++)t[l].setAttribute("data-price",u[l]),t[l].setAttribute("data-count",m[l]),t[l].addEventListener(e,(()=>{+t[l].dataset.price<=c&&!t[l].classList.contains("not-enough")&&(t[l].classList.add("click-up"),a[l].parentNode.parentNode.classList.add("click-up"),t[l].addEventListener(o,(()=>{t[l].classList.remove("click-up"),a[l].parentNode.parentNode.classList.remove("click-up")})))})),t[l].addEventListener("click",(()=>{if(+t[l].dataset.price<=c&&!t[l].classList.contains("not-enough")){c-=+t[l].dataset.price,n=+n+ +t[l].dataset.count,localStorage.setItem("perSecond",n);let e=1;const o=setInterval((()=>{e*=1.5,y.textContent=n>=100?Math.round(+y.textContent+e):y.textContent=(+y.textContent+e).toFixed(1),+y.textContent>=+localStorage.getItem("perSecond")&&(clearInterval(o),y.textContent=n>=100?Math.round(Number(localStorage.getItem("perSecond"))):y.textContent=Number(localStorage.getItem("perSecond")).toFixed(1))}),4);localStorage.setItem("count",c),t[l].classList.remove("click-up"),a[l].parentNode.parentNode.classList.remove("click-up")}}));let k=[];for(let e=0;e<t.length;e++){let o=0,c=localStorage.getItem(s).split(",");o=c[e],a[e].textContent=o+"x",k.push(o),0!=+o&&(t[e].dataset.price=(t[e].dataset.price*i**o).toFixed(1)),+t[e].dataset.price>=1e3?r[e].textContent=Math.round(+t[e].dataset.price):r[e].textContent=(+t[e].dataset.price).toFixed(1),t[e].addEventListener("click",(()=>{if(!t[e].classList.contains("not-enough")){a[e].textContent=++o+"x",k[e]=o,localStorage.setItem(s,k);let c=1;const n=+t[e].dataset.price,l=setInterval((()=>{c*=1.5,+t[e].dataset.price>=1e3?r[e].textContent=Math.round(+t[e].dataset.price+c):r[e].textContent=(+t[e].dataset.price+c).toFixed(1),+r[e].textContent>=Math.round(t[e].dataset.price*i)&&(clearInterval(l),t[e].dataset.price=n*i,+t[e].dataset.price>=1e3?r[e].textContent=Math.round(+t[e].dataset.price):r[e].textContent=(+t[e].dataset.price).toFixed(1))}),4)}}))}}function q(e,t){let o=[];for(let c=0;c<e.length;c++)o[c]=0,localStorage.setItem(t,o)}E(_,L,I,"perClickUP"),E(S,C,M,"perSecondUP"),window.addEventListener("scroll",(()=>{window.scrollY<200?(F.style.bottom="-60px",F.style.opacity=0,F.firstElementChild.classList.remove("click")):(F.style.bottom="80px",F.style.opacity=1),F.addEventListener("click",(()=>{F.firstElementChild.classList.add("click"),window.scrollTo({top:0,behavior:"smooth"})}))}));const b=setInterval((function(){if(c=+c+ +n/100,localStorage.setItem("count",c),g.textContent=c>=1e3?Math.round(c):c.toFixed(1),_[0].parentNode.parentNode.classList.contains("clicker__shop-per-click"))for(let e=0;e<_.length;e++)_[e].dataset.price=I[e].textContent,_[e].dataset.count=p[e];else for(let e=0;e<S.length;e++)S[e].dataset.price=M[e].textContent,S[e].dataset.count=m[e]}),10);N.addEventListener("click",(()=>{window.scrollTo(0,0),clearInterval(b),localStorage.setItem("count",c=0),localStorage.setItem("perClick",l=1),localStorage.setItem("perSecond",n=0),g.textContent=c.toFixed(1),y.textContent=n.toFixed(1),f.textContent=l.toFixed(1),q(_,"perClickUP"),q(S,"perSecondUP"),window.location.reload()}))}/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)?e("touchstart","touchend","touchend"):e("mousedown","mouseup","mouseleave")}));