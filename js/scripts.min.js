document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".clicker__btn"),t=document.querySelector(".clicker__count"),c=document.querySelectorAll(".clicker__shop-lvl"),o=document.querySelectorAll(".clicker__shop-lvl-per-click"),l=document.querySelectorAll(".clicker__shop-lvl-per-second"),n=document.querySelectorAll(".clicker__shop-price-amount"),a=document.querySelectorAll(".per__click-amount"),r=document.querySelectorAll(".per__second-amount"),s=document.querySelectorAll(".per__click-count"),i=document.querySelectorAll(".per__second-count"),d=document.querySelector(".clicker__seconds"),u=document.querySelector(".clicker__clicks"),p=document.querySelector(".reset");let m,k;const g=1.15,S=[20,100,500,2500,12500],C=[.1,1,5,25,125],x=[50,200,1e3,5e3,2e4],I=[.1,1,5,25,125];null!==localStorage.getItem("count")&&null!==localStorage.getItem("perSecond")&&null!==localStorage.getItem("perClick")&&null!==localStorage.getItem("perSecondUP")&&null!==localStorage.getItem("perClickUP")?(m=+localStorage.getItem("count"),k=+localStorage.getItem("perSecond"),perClick=+localStorage.getItem("perClick"),t.textContent=Math.round(m),d.textContent=k.toFixed(1),u.textContent=perClick.toFixed(1)):(m=0,k=0,perClick=1,t.textContent=m,d.textContent=k.toFixed(1),u.textContent=perClick.toFixed(1),localStorage.setItem("count",m),localStorage.setItem("perSecond",k),localStorage.setItem("perClick",perClick),h(o,"perClickUP"),h(l,"perSecondUP")),e.addEventListener("click",(()=>{m+=+localStorage.getItem("perClick"),localStorage.setItem("count",m),t.textContent=m.toFixed(1),e.classList.add("click"),e.classList.contains("click")&&setTimeout((()=>e.classList.remove("click")),50)}));for(let e=0;e<c.length;e++)setInterval((()=>+c[e].dataset.price>m?c[e].classList.add("not-enough")||n[e].parentNode.parentNode.classList.add("not-enough"):c[e].classList.remove("not-enough")||n[e].parentNode.parentNode.classList.remove("not-enough")),100);for(let e=0;e<l.length;e++)l[e].setAttribute("data-price",S[e]),l[e].setAttribute("data-count",C[e]),o[e].setAttribute("data-price",x[e]),o[e].setAttribute("data-count",I[e]),l[e].addEventListener("click",(()=>{if(+l[e].dataset.price<=m&&!l[e].classList.contains("not-enough")){m-=+l[e].dataset.price,k=+k+ +l[e].dataset.count,localStorage.setItem("perSecond",k);let t=1;const c=setInterval((()=>{t*=1.5,d.textContent=Math.round(+d.textContent+t).toFixed(1),+d.textContent>=+localStorage.getItem("perSecond")&&(clearInterval(c),d.textContent=Number(localStorage.getItem("perSecond")).toFixed(1))}),4);localStorage.setItem("count",m),l[e].classList.add("click-up"),r[e].parentNode.parentNode.classList.add("click-up"),l[e].classList.contains("click-up")&&setTimeout((()=>{l[e].classList.remove("click-up"),r[e].parentNode.parentNode.classList.remove("click-up")}),200)}})),o[e].addEventListener("click",(()=>{+o[e].dataset.price<=m&&!o[e].classList.contains("not-enough")&&(m-=+o[e].dataset.price,perClick+=+o[e].dataset.count,localStorage.setItem("count",m),localStorage.setItem("perClick",perClick),u.textContent=perClick.toFixed(1),o[e].classList.add("click-up"),a[e].parentNode.parentNode.classList.add("click-up"),o[e].classList.contains("click-up")&&setTimeout((()=>{o[e].classList.remove("click-up"),a[e].parentNode.parentNode.classList.remove("click-up")}),200))}));function L(e,t,c,o){let l=[];for(let n=0;n<e.length;n++){let a=0,r=localStorage.getItem(o).split(",");a=r[n],t[n].textContent=a+"x",l.push(a),0!=+a&&(e[n].dataset.price=Math.round(e[n].dataset.price*g**a)),c[n].textContent=e[n].dataset.price,e[n].addEventListener("click",(()=>{if(!e[n].classList.contains("not-enough")){t[n].textContent=++a+"x",l[n]=a,localStorage.setItem(o,l);let r=1;const s=+e[n].dataset.price,i=setInterval((()=>{r*=1.5,c[n].textContent=Math.round(+e[n].dataset.price+r),+c[n].textContent>=Math.round(e[n].dataset.price*g)&&(clearInterval(i),e[n].dataset.price=Math.round(s*g),c[n].textContent=e[n].dataset.price)}),4)}}))}}function h(e,t){let c=[];for(let o=0;o<e.length;o++)c[o]=0,localStorage.setItem(t,c)}L(o,a,s,"perClickUP"),L(l,r,i,"perSecondUP");const _=setInterval((function(){m=+m+ +k/100,localStorage.setItem("count",m),t.textContent=m.toFixed(1);for(let e=0;e<o.length;e++)o[e].dataset.price=s[e].textContent,o[e].dataset.count=I[e],l[e].dataset.price=i[e].textContent,l[e].dataset.count=C[e]}),10);p.addEventListener("click",(()=>{clearInterval(_),m=0,perClick=1,k=0,localStorage.setItem("count",m),localStorage.setItem("perClick",perClick),localStorage.setItem("perSecond",k),t.textContent=Math.round(m),d.textContent=k,u.textContent=perClick,h(o,"perClickUP"),h(l,"perSecondUP"),window.location.reload()}))}));