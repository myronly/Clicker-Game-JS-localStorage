document.addEventListener("DOMContentLoaded",(()=>{function e(e,t,o){let c,n;const l=document.querySelector(".cookie-wrapper"),a=document.querySelector(".clicker__shop-per-click"),r=document.querySelector(".clicker__shop-per-second"),s=1.25,i=[20,100,500,2500,12500],d=[.1,1,5,25,125],p=[50,200,1e3,5e3,2e4],u=[.1,1,5,10,25];function m(e,t){for(let o=0;o<t.length;o++){const c=document.createElement("div");c.classList.add("clicker__shop-up"),e.classList.contains("clicker__shop-per-click")?(n="clicker__shop-lvl-per-click",amountAndCount="click",name="click"):(n="clicker__shop-lvl-per-second",amountAndCount="second",name="sec"),c.innerHTML=`\n        <div class="clicker__shop-price not-enough">\n          <p>\n            <span class="clicker__shop-price-amount per__${amountAndCount}-amount per__click-amount">0</span>\n            <span class="clicker__shop-price-count per__${amountAndCount}-count per__click-count">0</span>\n          </p>\n          <img src="img/cookie.png" alt="cookie" />\n        </div>\n        <div class="clicker__shop-lvl ${n} not-enough">+${t[o]}/${name}</div>`,e.append(c)}}m(a,u),m(r,d);const k=document.querySelector(".clicker__btn"),g=document.querySelector(".clicker__count"),_=document.querySelectorAll(".clicker__shop-lvl"),S=document.querySelectorAll(".clicker__shop-lvl-per-click"),C=document.querySelectorAll(".clicker__shop-lvl-per-second"),h=document.querySelectorAll(".clicker__shop-price-amount"),v=document.querySelectorAll(".per__click-amount"),L=document.querySelectorAll(".per__second-amount"),x=document.querySelectorAll(".per__click-count"),I=document.querySelectorAll(".per__second-count"),N=document.querySelector(".clicker__seconds"),f=document.querySelector(".clicker__clicks"),y=document.querySelector(".reset");null!==localStorage.getItem("count")&&null!==localStorage.getItem("perSecond")&&null!==localStorage.getItem("perClick")&&null!==localStorage.getItem("perSecondUP")&&null!==localStorage.getItem("perClickUP")?(c=+localStorage.getItem("count"),n=+localStorage.getItem("perSecond"),perClick=+localStorage.getItem("perClick"),g.textContent=Math.round(c),N.textContent=n.toFixed(1),f.textContent=perClick.toFixed(1)):(c=0,n=0,perClick=1,g.textContent=c,N.textContent=n.toFixed(1),f.textContent=perClick.toFixed(1),localStorage.setItem("count",c),localStorage.setItem("perSecond",n),localStorage.setItem("perClick",perClick),q(S,"perClickUP"),q(C,"perSecondUP")),k.addEventListener(e,(()=>{k.classList.add("click");const e=document.createElement("div");e.classList.add("cookie-bg");let t=5*Math.random()+5,o=100*Math.random(),c=Math.random()+1;c<1.2&&(c+=.2),e.style.cssText=`\n      animation: fall ${t}s linear;\n      left: ${o}%;\n      transform: scale(${c});`,l.append(e),setTimeout((()=>e.remove()),1e3*+t)})),k.addEventListener(t,(()=>{c+=+localStorage.getItem("perClick"),localStorage.setItem("count",c),g.textContent=c.toFixed(1),k.classList.remove("click")}));for(let e=0;e<_.length;e++)setInterval((()=>{+_[e].dataset.price>c?(_[e].classList.add("not-enough"),h[e].parentNode.parentNode.classList.add("not-enough")):(_[e].classList.remove("not-enough"),h[e].parentNode.parentNode.classList.remove("not-enough"))}),50);function A(l,a,r,m){if(l[0].parentNode.parentNode.classList.contains("clicker__shop-per-click"))for(let n=0;n<l.length;n++)l[n].setAttribute("data-price",p[n]),l[n].setAttribute("data-count",u[n]),l[n].addEventListener(e,(()=>{+l[n].dataset.price<=c&&!l[n].classList.contains("not-enough")&&(l[n].classList.add("click-up"),a[n].parentNode.parentNode.classList.add("click-up"),l[n].addEventListener(o,(()=>{l[n].classList.remove("click-up"),a[n].parentNode.parentNode.classList.remove("click-up")})))})),l[n].addEventListener(t,(()=>{+l[n].dataset.price<=c&&!l[n].classList.contains("not-enough")&&(c-=+l[n].dataset.price,perClick+=+l[n].dataset.count,localStorage.setItem("count",c),localStorage.setItem("perClick",perClick),f.textContent=perClick.toFixed(1),l[n].classList.remove("click-up"),a[n].parentNode.parentNode.classList.remove("click-up"))}));else for(let r=0;r<l.length;r++)l[r].setAttribute("data-price",i[r]),l[r].setAttribute("data-count",d[r]),l[r].addEventListener(e,(()=>{+l[r].dataset.price<=c&&!l[r].classList.contains("not-enough")&&(l[r].classList.add("click-up"),a[r].parentNode.parentNode.classList.add("click-up"),l[r].addEventListener(o,(()=>{l[r].classList.remove("click-up"),a[r].parentNode.parentNode.classList.remove("click-up")})))})),l[r].addEventListener(t,(()=>{if(+l[r].dataset.price<=c&&!l[r].classList.contains("not-enough")){c-=+l[r].dataset.price,n=+n+ +l[r].dataset.count,localStorage.setItem("perSecond",n);let e=1;const t=setInterval((()=>{e*=1.5,N.textContent=Math.round(+N.textContent+e).toFixed(1),+N.textContent>=+localStorage.getItem("perSecond")&&(clearInterval(t),N.textContent=Number(localStorage.getItem("perSecond")).toFixed(1))}),4);localStorage.setItem("count",c),l[r].classList.remove("click-up"),a[r].parentNode.parentNode.classList.remove("click-up")}}));let k=[];for(let e=0;e<l.length;e++){let o=0,c=localStorage.getItem(m).split(",");o=c[e],a[e].textContent=o+"x",k.push(o),0!=+o&&(l[e].dataset.price=(l[e].dataset.price*s**o).toFixed(1)),r[e].textContent=(+l[e].dataset.price).toFixed(1),l[e].addEventListener(t,(()=>{if(!l[e].classList.contains("not-enough")){a[e].textContent=++o+"x",k[e]=o,localStorage.setItem(m,k);let t=1;const c=+l[e].dataset.price,n=setInterval((()=>{t*=1.5,r[e].textContent=(+l[e].dataset.price+t).toFixed(1),+r[e].textContent>=Math.round(l[e].dataset.price*s)&&(clearInterval(n),l[e].dataset.price=c*s,r[e].textContent=(+l[e].dataset.price).toFixed(1))}),4)}}))}}function q(e,t){let o=[];for(let c=0;c<e.length;c++)o[c]=0,localStorage.setItem(t,o)}A(S,v,x,"perClickUP"),A(C,L,I,"perSecondUP");const E=setInterval((function(){if(c=+c+ +n/100,localStorage.setItem("count",c),g.textContent=c.toFixed(1),S[0].parentNode.parentNode.classList.contains("clicker__shop-per-click"))for(let e=0;e<S.length;e++)S[e].dataset.price=x[e].textContent,S[e].dataset.count=u[e];else for(let e=0;e<C.length;e++)C[e].dataset.price=I[e].textContent,C[e].dataset.count=d[e]}),10);y.addEventListener("click",(()=>{clearInterval(E),c=0,perClick=1,n=0,localStorage.setItem("count",c),localStorage.setItem("perClick",perClick),localStorage.setItem("perSecond",n),g.textContent=Math.round(c),N.textContent=n,f.textContent=perClick,q(S,"perClickUP"),q(C,"perSecondUP"),window.location.reload()}))}/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)?e("touchstart","touchend","touchcancel"):e("mousedown","mouseup","mouseleave")}));