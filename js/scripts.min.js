document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".clicker__btn"),e=document.querySelector(".clicker__count"),o=document.querySelectorAll(".clicker__shop-lvl"),n=document.querySelectorAll(".clicker__shop-price-amount"),c=document.querySelectorAll(".clicker__shop-price-count"),a=document.querySelector(".clicker__seconds"),l=document.querySelector(".reset");let r,s,d=[];const i=1.15,u=[20,100,500,2500,12500],m=[.1,1,5,25,125];null!==localStorage.getItem("count")&&null!==localStorage.getItem("perSecond")&&null!==localStorage.getItem("amountPerSecond")?(r=+localStorage.getItem("count"),s=+localStorage.getItem("perSecond"),e.textContent=Math.round(r),a.textContent=s.toFixed(1)):(r=0,s=0,e.textContent=r,a.textContent=s.toFixed(1),localStorage.setItem("count",r),localStorage.setItem("perSecond",s),p()),t.addEventListener("click",(()=>{localStorage.setItem("count",++r),e.textContent=r.toFixed(1),t.classList.add("click"),t.classList.contains("click")&&setTimeout((()=>t.classList.remove("click")),50)}));for(let t=0;t<o.length;t++)o[t].setAttribute("data-price",u[t]),o[t].setAttribute("data-count",m[t]),setInterval((()=>+o[t].dataset.price>r?o[t].classList.add("not-enough")||n[t].parentNode.parentNode.classList.add("not-enough"):o[t].classList.remove("not-enough")||n[t].parentNode.parentNode.classList.remove("not-enough")),100),o[t].addEventListener("click",(()=>{if(+o[t].dataset.price<=r&&!o[t].classList.contains("not-enough")){r-=+o[t].dataset.price,s=+s+ +o[t].dataset.count,localStorage.setItem("perSecond",s);let e=1;const c=setInterval((()=>{e*=1.5,a.textContent=Math.round(+a.textContent+e).toFixed(1),+a.textContent>=+localStorage.getItem("perSecond")&&(clearInterval(c),a.textContent=Number(localStorage.getItem("perSecond")).toFixed(1))}),4);localStorage.setItem("count",r),o[t].classList.add("click-up"),n[t].parentNode.parentNode.classList.add("click-up"),o[t].classList.contains("click-up")&&setTimeout((()=>{o[t].classList.remove("click-up"),n[t].parentNode.parentNode.classList.remove("click-up")}),200)}}));function p(){for(let t=0;t<o.length;t++)amount=0,d[t]=amount,localStorage.setItem("amountPerSecond",d)}for(let t=0;t<o.length;t++){let e=0,a=localStorage.getItem("amountPerSecond").split(",");e=a[t],n[t].textContent=e+"x",d.push(e),0!=+e&&(o[t].dataset.price=Math.round(o[t].dataset.price*i**e)),c[t].textContent=o[t].dataset.price,o[t].addEventListener("click",(()=>{if(!o[t].classList.contains("not-enough")){n[t].textContent=++e+"x",d[t]=e,localStorage.setItem("amountPerSecond",d);let a=1;const l=+o[t].dataset.price,r=setInterval((()=>{a*=1.5,c[t].textContent=Math.round(+o[t].dataset.price+a),+c[t].textContent>=Math.round(o[t].dataset.price*i)&&(clearInterval(r),o[t].dataset.price=Math.round(l*i),c[t].textContent=o[t].dataset.price)}),4)}}))}const g=setInterval((function(){r=+r+ +s/100,localStorage.setItem("count",r),e.textContent=r.toFixed(1);for(let t=0;t<o.length;t++)o[t].dataset.price=c[t].textContent,o[t].dataset.count=m[t]}),10);l.addEventListener("click",(()=>{clearInterval(g),r=0,s=0,localStorage.setItem("count",r),localStorage.setItem("perSecond",s),e.textContent=Math.round(r),a.textContent=s,p(),window.location.reload()}))}));