document.addEventListener("DOMContentLoaded",(()=>{let e,t;const c=document.querySelector(".clicker__shop-per-click"),o=document.querySelector(".clicker__shop-per-second"),l=1.25,n=[20,100,500,2500,12500],a=[.1,1,5,25,125],r=[50,200,1e3,5e3,2e4],s=[.1,1,5,10,25];function i(e,c){for(let o=0;o<c.length;o++){const l=document.createElement("div");l.classList.add("clicker__shop-up"),e.classList.contains("clicker__shop-per-click")?(t="clicker__shop-lvl-per-click",amountAndCount="click",name="click"):(t="clicker__shop-lvl-per-second",amountAndCount="second",name="sec"),l.innerHTML=`\n        <div class="clicker__shop-price not-enough">\n          <p>\n            <span class="clicker__shop-price-amount per__${amountAndCount}-amount per__click-amount">0</span>\n            <span class="clicker__shop-price-count per__${amountAndCount}-count per__click-count">0</span>\n          </p>\n          <img src="img/cookie.png" alt="cookie" />\n        </div>\n        <div class="clicker__shop-lvl ${t} not-enough">+${c[o]}/${name}</div>`,e.append(l)}}i(c,s),i(o,a);const d=document.querySelector(".clicker__btn"),p=document.querySelector(".clicker__count"),u=document.querySelectorAll(".clicker__shop-lvl"),k=document.querySelectorAll(".clicker__shop-lvl-per-click"),m=document.querySelectorAll(".clicker__shop-lvl-per-second"),g=document.querySelectorAll(".clicker__shop-price-amount"),_=document.querySelectorAll(".per__click-amount"),S=document.querySelectorAll(".per__second-amount"),C=document.querySelectorAll(".per__click-count"),x=document.querySelectorAll(".per__second-count"),L=document.querySelector(".clicker__seconds"),h=document.querySelector(".clicker__clicks"),v=document.querySelector(".reset");null!==localStorage.getItem("count")&&null!==localStorage.getItem("perSecond")&&null!==localStorage.getItem("perClick")&&null!==localStorage.getItem("perSecondUP")&&null!==localStorage.getItem("perClickUP")?(e=+localStorage.getItem("count"),t=+localStorage.getItem("perSecond"),perClick=+localStorage.getItem("perClick"),p.textContent=Math.round(e),L.textContent=t.toFixed(1),h.textContent=perClick.toFixed(1)):(e=0,t=0,perClick=1,p.textContent=e,L.textContent=t.toFixed(1),h.textContent=perClick.toFixed(1),localStorage.setItem("count",e),localStorage.setItem("perSecond",t),localStorage.setItem("perClick",perClick),N(k,"perClickUP"),N(m,"perSecondUP")),d.addEventListener("click",(()=>{e+=+localStorage.getItem("perClick"),localStorage.setItem("count",e),p.textContent=e.toFixed(1),d.classList.add("click"),d.classList.contains("click")&&setTimeout((()=>d.classList.remove("click")),50)}));for(let t=0;t<u.length;t++)setInterval((()=>{u[t].classList.contains("click-up")&&setTimeout((()=>{u[t].classList.remove("click-up"),g[t].parentNode.parentNode.classList.remove("click-up")}),200),+u[t].dataset.price>e?(u[t].classList.add("not-enough"),g[t].parentNode.parentNode.classList.add("not-enough")):(u[t].classList.remove("not-enough"),g[t].parentNode.parentNode.classList.remove("not-enough"))}),50),setInterval((()=>{+u[t].dataset.price<e&&(u[t].classList.add("click-up"),g[t].parentNode.parentNode.classList.add("click-up"),setTimeout((()=>{u[t].classList.remove("click-up"),g[t].parentNode.parentNode.classList.remove("click-up")}),200))}),200);function I(c,o,i,d){if(c[0].parentNode.parentNode.classList.contains("clicker__shop-per-click"))for(let t=0;t<c.length;t++)c[t].setAttribute("data-price",r[t]),c[t].setAttribute("data-count",s[t]),c[t].addEventListener("click",(()=>{+c[t].dataset.price<=e&&!c[t].classList.contains("not-enough")&&(e-=+c[t].dataset.price,perClick+=+c[t].dataset.count,localStorage.setItem("count",e),localStorage.setItem("perClick",perClick),h.textContent=perClick.toFixed(1),c[t].classList.add("click-up"),o[t].parentNode.parentNode.classList.add("click-up"),c[t].classList.contains("click-up")&&setTimeout((()=>{c[t].classList.remove("click-up"),o[t].parentNode.parentNode.classList.remove("click-up")}),200))}));else for(let l=0;l<c.length;l++)c[l].setAttribute("data-price",n[l]),c[l].setAttribute("data-count",a[l]),c[l].addEventListener("click",(()=>{if(+c[l].dataset.price<=e&&!c[l].classList.contains("not-enough")){e-=+c[l].dataset.price,t=+t+ +c[l].dataset.count,localStorage.setItem("perSecond",t);let n=1;const a=setInterval((()=>{n*=1.5,L.textContent=Math.round(+L.textContent+n).toFixed(1),+L.textContent>=+localStorage.getItem("perSecond")&&(clearInterval(a),L.textContent=Number(localStorage.getItem("perSecond")).toFixed(1))}),4);localStorage.setItem("count",e),c[l].classList.add("click-up"),o[l].parentNode.parentNode.classList.add("click-up"),c[l].classList.contains("click-up")&&setTimeout((()=>{c[l].classList.remove("click-up"),o[l].parentNode.parentNode.classList.remove("click-up")}),200)}}));let p=[];for(let e=0;e<c.length;e++){let t=0,n=localStorage.getItem(d).split(",");t=n[e],o[e].textContent=t+"x",p.push(t),0!=+t&&(c[e].dataset.price=(c[e].dataset.price*l**t).toFixed(1)),i[e].textContent=(+c[e].dataset.price).toFixed(1),c[e].addEventListener("click",(()=>{if(!c[e].classList.contains("not-enough")){o[e].textContent=++t+"x",p[e]=t,localStorage.setItem(d,p);let n=1;const a=+c[e].dataset.price,r=setInterval((()=>{n*=1.5,i[e].textContent=(+c[e].dataset.price+n).toFixed(1),+i[e].textContent>=Math.round(c[e].dataset.price*l)&&(clearInterval(r),c[e].dataset.price=a*l,i[e].textContent=(+c[e].dataset.price).toFixed(1))}),4)}}))}}function N(e,t){let c=[];for(let o=0;o<e.length;o++)c[o]=0,localStorage.setItem(t,c)}I(k,_,C,"perClickUP"),I(m,S,x,"perSecondUP");const f=setInterval((function(){if(e=+e+ +t/100,localStorage.setItem("count",e),p.textContent=e.toFixed(1),k[0].parentNode.parentNode.classList.contains("clicker__shop-per-click"))for(let e=0;e<k.length;e++)k[e].dataset.price=C[e].textContent,k[e].dataset.count=s[e];else for(let e=0;e<m.length;e++)m[e].dataset.price=x[e].textContent,m[e].dataset.count=a[e]}),10);v.addEventListener("click",(()=>{clearInterval(f),e=107,perClick=1,t=0,localStorage.setItem("count",e),localStorage.setItem("perClick",perClick),localStorage.setItem("perSecond",t),p.textContent=Math.round(e),L.textContent=t,h.textContent=perClick,N(k,"perClickUP"),N(m,"perSecondUP"),window.location.reload()}))}));